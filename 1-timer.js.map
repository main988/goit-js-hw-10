{"version":3,"file":"1-timer.js","sources":["../src/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst datetimePicker = document.querySelector('#datetime-picker');\nconst startButton = document.querySelector('[data-start]');\nconst timerFields = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate = null;\nlet countdownInterval = null;\n\n/**\n *\n * @param {number} value\n * @returns {string}\n */\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n}\n\n/**\n * \n * @param {number} ms\n * @returns {{days: number, hours: number, minutes: number, seconds: number}}\n */\nfunction convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\n/**\n *\n * @param {{days: number, hours: number, minutes: number, seconds: number}} timeObj\n */\nfunction updateTimerInterface(timeObj) {\n    timerFields.days.textContent = String(timeObj.days).padStart(2, '0');\n    timerFields.hours.textContent = addLeadingZero(timeObj.hours);\n    timerFields.minutes.textContent = addLeadingZero(timeObj.minutes);\n    timerFields.seconds.textContent = addLeadingZero(timeObj.seconds);\n}\n\n/**\n *\n */\nfunction stopTimer() {\n    clearInterval(countdownInterval);\n    countdownInterval = null;\n    datetimePicker.disabled = false;\n    startButton.disabled = true;\n\n    iziToast.success({\n        title: 'Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾! ðŸŽ‰',\n        message: 'Ð—Ð²Ð¾Ñ€Ð¾Ñ‚Ð½Ð¸Ð¹ Ð²Ñ–Ð´Ð»Ñ–Ðº Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾!',\n        position: 'topRight',\n    });\n}\n\nfunction countdown() {\n    const now = new Date().getTime();\n    const remainingTimeMs = userSelectedDate.getTime() - now;\n\n    if (remainingTimeMs <= 0) {\n        stopTimer();\n        updateTimerInterface({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n        return;\n    }\n\n    const time = convertMs(remainingTimeMs);\n    updateTimerInterface(time);\n}\n\nfunction handleStartClick() {\n    if (!userSelectedDate || countdownInterval) {\n        return;\n    }\n\n    startButton.disabled = true;\n    datetimePicker.disabled = true;\n\n    countdown();\n    countdownInterval = setInterval(countdown, 1000);\n}\n\nconst flatpickrOptions = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const selectedDate = selectedDates[0];\n        const now = new Date();\n\n        if (selectedDate.getTime() <= now.getTime()) {\n            startButton.disabled = true;\n            userSelectedDate = null;\n            iziToast.error({\n                message: 'Please choose a date in the future',\n                position: 'topRight',\n                timeout: 3000,\n            });\n        } else {\n            startButton.disabled = false;\n            userSelectedDate = selectedDate;\n        }\n    },\n};\n\nflatpickr(datetimePicker, flatpickrOptions);\n\nstartButton.addEventListener('click', handleStartClick);\n\nupdateTimerInterface({ days: 0, hours: 0, minutes: 0, seconds: 0 });"],"names":["datetimePicker","startButton","timerFields","userSelectedDate","countdownInterval","addLeadingZero","value","convertMs","ms","days","hours","minutes","seconds","updateTimerInterface","timeObj","stopTimer","iziToast","countdown","now","remainingTimeMs","time","handleStartClick","flatpickrOptions","selectedDates","selectedDate","flatpickr"],"mappings":"2FAKA,MAAMA,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAc,CAChB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EAEA,IAAIC,EAAmB,KACnBC,EAAoB,KAOxB,SAASC,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAOA,SAASC,EAAUC,EAAI,CAMnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAMA,SAASC,EAAqBC,EAAS,CACnCZ,EAAY,KAAK,YAAc,OAAOY,EAAQ,IAAI,EAAE,SAAS,EAAG,GAAG,EACnEZ,EAAY,MAAM,YAAcG,EAAeS,EAAQ,KAAK,EAC5DZ,EAAY,QAAQ,YAAcG,EAAeS,EAAQ,OAAO,EAChEZ,EAAY,QAAQ,YAAcG,EAAeS,EAAQ,OAAO,CACpE,CAKA,SAASC,GAAY,CACjB,cAAcX,CAAiB,EAC/BA,EAAoB,KACpBJ,EAAe,SAAW,GAC1BC,EAAY,SAAW,GAEvBe,EAAS,QAAQ,CACb,MAAO,gBACP,QAAS,8BACT,SAAU,UAClB,CAAK,CACL,CAEA,SAASC,GAAY,CACjB,MAAMC,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAAkBhB,EAAiB,QAAO,EAAKe,EAErD,GAAIC,GAAmB,EAAG,CACtBJ,IACAF,EAAqB,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EAClE,MACH,CAED,MAAMO,EAAOb,EAAUY,CAAe,EACtCN,EAAqBO,CAAI,CAC7B,CAEA,SAASC,GAAmB,CACpB,CAAClB,GAAoBC,IAIzBH,EAAY,SAAW,GACvBD,EAAe,SAAW,GAE1BiB,IACAb,EAAoB,YAAYa,EAAW,GAAI,EACnD,CAEA,MAAMK,EAAmB,CACrB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,MAAMC,EAAeD,EAAc,CAAC,EAC9BL,EAAM,IAAI,KAEZM,EAAa,QAAO,GAAMN,EAAI,QAAO,GACrCjB,EAAY,SAAW,GACvBE,EAAmB,KACnBa,EAAS,MAAM,CACX,QAAS,qCACT,SAAU,WACV,QAAS,GACzB,CAAa,IAEDf,EAAY,SAAW,GACvBE,EAAmBqB,EAE1B,CACL,EAEAC,EAAUzB,EAAgBsB,CAAgB,EAE1CrB,EAAY,iBAAiB,QAASoB,CAAgB,EAEtDR,EAAqB,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,EAAG"}